document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector("#previewTentangImg"),e=document.querySelector("#gambar"),r=document.querySelector(".reset-image-btn"),i=document.getElementById("formTentang");if(t&&e){const s=t.src;e.addEventListener("change",function(){const n=this.files[0];if(n){if(!["image/jpeg","image/png","image/jpg"].includes(n.type)){Swal.fire({icon:"error",title:"Format tidak didukung",text:"Hanya JPG, JPEG, atau PNG yang diperbolehkan.",customClass:{confirmButton:"btn btn-danger"},buttonsStyling:!1}),e.value="";return}if(n.size>2097152){Swal.fire({icon:"error",title:"Ukuran terlalu besar",text:"Ukuran maksimal 2MB.",customClass:{confirmButton:"btn btn-danger"},buttonsStyling:!1}),e.value="";return}t.src=URL.createObjectURL(n)}}),r&&r.addEventListener("click",function(){e.value="",t.src=s})}if(i){const s=i.dataset.mode==="edit";FormValidation.formValidation(i,{fields:{judul:{validators:{notEmpty:{message:"Judul wajib diisi"},stringLength:{min:3,message:"Judul minimal 3 karakter"}}},deskripsi:{validators:{notEmpty:{message:"Deskripsi wajib diisi"},stringLength:{min:5,message:"Deskripsi minimal 5 karakter"}}},gambar:{validators:{notEmpty:{enabled:!s,message:"Gambar wajib diunggah"},file:{extension:"jpg,jpeg,png",type:"image/jpeg,image/png",message:"File harus berupa gambar (jpg, jpeg, png)"}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap5:new FormValidation.plugins.Bootstrap5({rowSelector:".form-floating-outline"}),submitButton:new FormValidation.plugins.SubmitButton,defaultSubmit:new FormValidation.plugins.DefaultSubmit,autoFocus:new FormValidation.plugins.AutoFocus}})}const a=document.querySelector('meta[name="flash-success"]'),o=document.querySelector('meta[name="flash-error"]');a&&a.content&&Swal.fire({icon:"success",title:"Berhasil",text:a.content,timer:2e3,showConfirmButton:!1,customClass:{confirmButton:"btn btn-primary"},buttonsStyling:!1}),o&&o.content&&Swal.fire({icon:"error",title:"Gagal",text:o.content,customClass:{confirmButton:"btn btn-danger"},buttonsStyling:!1})});
